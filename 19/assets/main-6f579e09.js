import{j as s,C as u,u as d,a as f,c as j,g as v,r as h,S as m,b as N,f as g,W as C}from"./index-1a930767.js";import{s as S,a as b}from"./selectors-d3c279d2.js";import{L as y,M as O}from"./map-538f4234.js";const w=()=>s.jsx("div",{className:"spinner-container",children:s.jsx("div",{className:"spinner"})}),k=Object.values(u),A=()=>k,E=()=>{const l=d(A),c=d(t=>t.offers.currentCity),a=f(),i=t=>{a(j(t))};return s.jsx("div",{className:"tabs",children:s.jsx("section",{className:"locations container",children:s.jsx("ul",{className:"locations__list tabs__list",children:l.map(t=>{const e=t===c;return s.jsx("li",{className:"locations__item",children:s.jsx("a",{className:`locations__item-link tabs__item ${e?"tabs__item--active":""}`,href:`#${t}`,onClick:r=>{r.preventDefault(),i(t)},children:s.jsx("span",{children:t})})},t)})})})})};var _={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(l){(function(){var c={}.hasOwnProperty;function a(){for(var i=[],t=0;t<arguments.length;t++){var e=arguments[t];if(e){var r=typeof e;if(r==="string"||r==="number")i.push(e);else if(Array.isArray(e)){if(e.length){var o=a.apply(null,e);o&&i.push(o)}}else if(r==="object"){if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]")){i.push(e.toString());continue}for(var n in e)c.call(e,n)&&e[n]&&i.push(n)}}}return i.join(" ")}l.exports?(a.default=a,l.exports=a):window.classNames=a})()})(_);var I=_.exports;const x=v(I),D=({activeSorting:l})=>{const c=f(),[a,i]=h.useState(!1),t={transform:`translateY(-50%) ${a?"rotate(180deg)":""}`},e=n=>{n.key==="Escape"&&a&&(n.preventDefault(),i(!1))},r=()=>{i(n=>!n)},o=n=>{c(N(n)),i(!1)};return s.jsxs("form",{className:"places__sorting",action:"#",method:"get",onKeyDown:e,children:[s.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),s.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:r,children:[m[l],s.jsx("svg",{className:"places__sorting-arrow",width:7,height:4,style:t,children:s.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),s.jsx("ul",{className:x("places__options","places__options--custom",{"places__options--opened":a}),children:Object.entries(m).map(([n,p])=>s.jsx("li",{className:x("places__option",{"places__option--active":l===n}),tabIndex:0,onClick:()=>o(n),children:p},n))})]})},$=()=>{var n;const l=f(),c=d(S),a=d(b),i=d(p=>p.offers.loading),[t,e]=h.useState(null);h.useEffect(()=>{l(g())},[l]);const r=p=>{e(p)},o=(n=c[0])==null?void 0:n.city;return i?s.jsx(w,{}):s.jsxs(s.Fragment,{children:[s.jsx(C,{children:s.jsx("title",{children:"6 cities"})}),s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(E,{}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container container",children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[c.length," place",c.length!==1?"s":""," to stay in ",o==null?void 0:o.name]}),s.jsx(D,{activeSorting:a}),s.jsx("div",{className:"cities__places-list places__list tabs__content",style:{maxHeight:"666px"},children:s.jsx(y,{offers:c,onCardHover:r})})]}),s.jsx("div",{className:"cities__right-section",children:o&&s.jsx(O,{city:o,offers:c,hoveredOfferId:t,className:"cities__map"})})]})})]})};export{$ as default};
