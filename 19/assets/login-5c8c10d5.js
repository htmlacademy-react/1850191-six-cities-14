import{k as h,l as g,m as _,n as x,o as c,p as u,q as f,t as j,a as N,r as i,j as s,A,W as w}from"./index-1a930767.js";const{Axios:k,AxiosError:v,CanceledError:C,isCancel:L,CancelToken:z,VERSION:P,all:q,Cancel:D,isAxiosError:I,spread:R,toFormData:T,AxiosHeaders:F,HttpStatusCode:H,formToJSON:M,getAdapter:O,mergeConfig:U}=h,E=g("authorization/login",async(t,{dispatch:r,extra:{api:n}})=>{try{const a=await n.post(_.Login,t);if(a.status===201){const e=a.data;return x(e.token),r(c(u.Auth)),r(f(e)),e}else throw new Error("Authorization failed")}catch(a){let e="An error occurred during the login process.";throw a instanceof v&&a.response&&(a.response.status===400?e="Bad request. Please check your login details.":a.response.status===401&&(e="Unauthorized. Invalid email or password."),r(c(u.NoAuth))),new Error(e)}}),S=()=>{const t=j(),r=N(),[n,a]=i.useState(""),[e,d]=i.useState(""),[l,m]=i.useState(""),p=o=>{if(o.preventDefault(),!e.trim()){m("Пароль не должен состоять только из пробелов.");return}r(E({email:n,password:e})),t(A.Main)};return s.jsxs("section",{className:"login",children:[s.jsx("h1",{className:"login__title",children:"Sign in"}),s.jsxs("form",{className:"login__form form",onSubmit:p,children:[s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"E-mail"}),s.jsx("input",{className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0,value:n,onChange:o=>a(o.target.value)})]}),s.jsxs("div",{className:"login__input-wrapper form__input-wrapper",children:[s.jsx("label",{className:"visually-hidden",children:"Password"}),s.jsx("input",{className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0,value:e,onChange:o=>d(o.target.value)})]}),l&&s.jsx("p",{className:"login__error",children:l}),s.jsx("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]})},y=({city:t})=>s.jsx("section",{className:"locations locations--login locations--current",children:s.jsx("div",{className:"locations__item",children:s.jsx("a",{className:"locations__item-link",href:"#",children:s.jsx("span",{children:t})})})}),B=()=>s.jsxs("div",{className:"page__login-container container",children:[s.jsx(w,{children:s.jsx("title",{children:"6 cities-Login"})}),s.jsx(S,{}),s.jsx(y,{city:"Amsterdam"})]});export{B as default};
