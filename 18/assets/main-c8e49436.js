import{g,j as s,c as N,a as y,r as p,S as _,b as C,u as S,f as b,d as O,W as w}from"./index-c38f97e7.js";import{u as f,a as m}from"./store-hooks-7dc8696d.js";import{a as E,L as D,M as I}from"./map-dbcd716b.js";const k=()=>{const r=f(g),l=f(n=>n.offers.currentCity),t=m(),a=n=>{t(N(n))};return s.jsx("div",{className:"tabs",children:s.jsx("section",{className:"locations container",children:s.jsx("ul",{className:"locations__list tabs__list",children:r.map(n=>{const e=n===l;return s.jsx("li",{className:"locations__item",children:s.jsx("a",{className:`locations__item-link tabs__item ${e?"tabs__item--active":""}`,href:`#${n}`,onClick:o=>{o.preventDefault(),a(n)},children:s.jsx("span",{children:n})})},n)})})})})};var j={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var l={}.hasOwnProperty;function t(){for(var a=[],n=0;n<arguments.length;n++){var e=arguments[n];if(e){var o=typeof e;if(o==="string"||o==="number")a.push(e);else if(Array.isArray(e)){if(e.length){var d=t.apply(null,e);d&&a.push(d)}}else if(o==="object"){if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]")){a.push(e.toString());continue}for(var i in e)l.call(e,i)&&e[i]&&a.push(i)}}}return a.join(" ")}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(j);var A=j.exports;const x=y(A),H=({activeSorting:r})=>{const l=m(),[t,a]=p.useState(!1),n={transform:`translateY(-50%) ${t?"rotate(180deg)":""}`},e=i=>{i.key==="Escape"&&t&&(i.preventDefault(),a(!1))},o=()=>{a(i=>!i)},d=i=>{l(C(i)),a(!1)};return s.jsxs("form",{className:"places__sorting",action:"#",method:"get",onKeyDown:e,children:[s.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),s.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:o,children:[_[r],s.jsx("svg",{className:"places__sorting-arrow",width:7,height:4,style:n,children:s.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),s.jsx("ul",{className:x("places__options","places__options--custom",{"places__options--opened":t}),children:Object.entries(_).map(([i,h])=>s.jsx("li",{className:x("places__option",{"places__option--active":r===i}),tabIndex:0,onClick:()=>d(i),children:h},i))})]})};const M=()=>s.jsx("div",{className:"spinner-container",children:s.jsx("div",{className:"spinner"})}),K=()=>{var u;const r=m(),l=f(c=>c.offers.currentSorting),t=f(c=>c.offers.currentCity),a=f(c=>c.offers.offers),n=f(c=>c.offers.loading),e=(u=a.find(c=>c.city.name===t))==null?void 0:u.city,o=f(c=>c.offers),[d,i]=p.useState(null);p.useEffect(()=>{r(S(t))},[t,r]),p.useEffect(()=>{r(b())},[r]);function h(c){i(c)}const v=O(o,t);return n?s.jsx(M,{}):s.jsxs(s.Fragment,{children:[s.jsx(w,{children:s.jsx("title",{children:"6 cities"})}),s.jsx("h1",{className:"visually-hidden",children:"Cities"}),s.jsx(k,{}),s.jsx("div",{className:"cities",children:s.jsxs("div",{className:"cities__places-container container",children:[s.jsxs("section",{className:"cities__places places",children:[s.jsx("h2",{className:"visually-hidden",children:"Places"}),s.jsxs("b",{className:"places__found",children:[v.length," place",E(a.length)," to stay in ",t]}),s.jsx(H,{activeSorting:l}),s.jsx("div",{className:"cities__places-list places__list tabs__content",style:{maxHeight:"666px"},children:s.jsx(D,{offers:a,onCardHover:h,className:"cities__card"})})]}),s.jsx("div",{className:"cities__right-section",children:e&&s.jsx(I,{city:e,offers:a,hoveredOfferId:d,className:"cities__map"})})]})})]})};export{K as default};
