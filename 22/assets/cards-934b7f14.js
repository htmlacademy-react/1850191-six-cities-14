import{r as c,a as g,m as k,u as v,s as C,o as b,j as s,A as w,t as _,y as F,z as $,d as u,B as A,D as S,L as x}from"./index-254e73e7.js";const z=a=>a[0].toUpperCase()+a.slice(1),L=a=>a!==1?"s":"",j=c.memo(({offer:a,buttonClass:e,buttonActiveClass:i,iconClass:t,iconWidth:o,iconHeight:d})=>{const r=g(),p=k(),m=v(C),h=v(b),n=m.some(l=>l.id===a.id),N=()=>{if(h!==w.Auth){p(_.Login);return}const l=!n;r(F({id:a.id,status:l?1:0})).then(()=>{r($({...a,isFavorite:l}))})};return s.jsx("button",{className:`button ${e} ${n?i:""}`,type:"button",onClick:N,children:s.jsx("svg",{className:t,width:o,height:d,children:s.jsx("use",{xlinkHref:"#icon-bookmark"})})})});j.displayName="FavoriteButton";const O=c.memo(({offer:a,cardType:e})=>{const i=g(),t=e==="favorite",o=u({cities__card:e==="main","near-places__card":e==="offer",favorites__card:e==="favorite"}),d=u("place-card__image-wrapper",{"favorites__image-wrapper":e==="favorite"}),r=u("place-card__info",{"favorites__card-info":e==="favorite"}),p=t?{width:150,height:110}:{width:260,height:200},m=c.useCallback(()=>{t||i(A(a.id))},[i,a.id,t]),h=c.useCallback(()=>{t||i(S())},[i,t]),n=c.useMemo(()=>({width:`${a.rating/5*100}%`}),[a.rating]);return s.jsxs("article",{className:`${o} place-card`,onMouseEnter:m,onMouseLeave:h,children:[a.isPremium&&s.jsx("div",{className:"place-card__mark",children:s.jsx("span",{children:"Premium"})}),s.jsx("div",{className:`${d}`,children:s.jsx(x,{to:`${_.Offer}/${a.id}`,children:s.jsx("img",{className:"place-card__image",src:a.previewImage,...p,alt:a.title})})}),s.jsxs("div",{className:r,children:[s.jsxs("div",{className:"place-card__price-wrapper",children:[s.jsxs("div",{className:"place-card__price",children:[s.jsxs("b",{className:"place-card__price-value",children:["€",a.price]}),s.jsx("span",{className:"place-card__price-text",children:"/ night"})]}),s.jsx(j,{offer:a,buttonClass:"place-card__bookmark-button",buttonActiveClass:"place-card__bookmark-button--active",iconClass:"place-card__bookmark-icon",iconWidth:18,iconHeight:19})]}),a.rating&&s.jsx("div",{className:"place-card__rating rating",children:s.jsxs("div",{className:"place-card__stars rating__stars",children:[s.jsx("span",{style:n}),s.jsx("span",{className:"visually-hidden",children:"Rating"})]})}),s.jsx("h2",{className:"place-card__name",children:s.jsx(x,{to:`${_.Offer}/${a.id}`,children:a.title})}),s.jsx("p",{className:"place-card__type",children:z(a.type)})]})]})});O.displayName="Cards";export{O as C,j as F,L as a};
